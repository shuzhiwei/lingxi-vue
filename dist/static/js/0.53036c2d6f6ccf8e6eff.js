webpackJsonp([0],{BvJH:function(t,e){},CHIb:function(t,e){},GelW:function(t,e){},I3S0:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s={props:{addTodo:Function},data:function(){return{todo:""}},methods:{addItem:function(){var t=this.todo.trim();t?(this.$emit("addTodo",t),this.todo=""):alert("输入不能为空！")}}},a={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-header"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.todo,expression:"todo"}],attrs:{type:"text",placeholder:"请输入你的任务名称，按回车键确认"},domProps:{value:t.todo},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.addItem(e)},input:function(e){e.target.composing||(t.todo=e.target.value)}}})])},staticRenderFns:[]};var r=o("VU/8")(s,a,!1,function(t){o("h3Qj")},null,null).exports,n=o("mtWM"),i=o.n(n),c=o("mw3O"),d=o.n(c),l=o("g5nd"),u=o("miE6"),h={props:{item:Object,index:Number,delTodo:Function},data:function(){return{token:Object(l.b)("lingxi-token"),username:Object(l.b)("username"),backColor:"white",isShow:!1}},methods:{aaa:function(t){t?(this.backColor="gray",this.isShow=!0):(this.backColor="white",this.isShow=!1)},delItem:function(){this.item;var t=this.index;(0,this.delTodo)(t)},changePriority:function(t,e){var o=this;if(this.username===t){var s={token:this.token,id:e},a=this.$store.state.base_url+"/entertainment/todoListUpdatePriority";i.a.post(a,d.a.stringify(s)).then(function(t){var e=t.data.code;console.log(e),o.$router.push({path:"/main/todo"}),o.$router.go(0)}).catch(function(t){o.$message.error("请求失败！")})}else this.$message.error("不是您的todo哦！")}}},m={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("li",{staticClass:"a",style:{background:t.backColor},on:{mouseenter:function(e){return t.aaa(!0)},mouseleave:function(e){return t.aaa(!1)}}},[o("label",{staticClass:"b"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.item.status,expression:"item.status"}],staticClass:"c",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.item.status)?t._i(t.item.status,null)>-1:t.item.status},on:{change:function(e){var o=t.item.status,s=e.target,a=!!s.checked;if(Array.isArray(o)){var r=t._i(o,null);s.checked?r<0&&t.$set(t.item,"status",o.concat([null])):r>-1&&t.$set(t.item,"status",o.slice(0,r).concat(o.slice(r+1)))}else t.$set(t.item,"status",a)}}}),t._v(" "),1===t.item.priority?o("span",[o("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#ffd633","font-size":"25px"},on:{click:function(e){return t.changePriority(t.item.author,t.item.id)}}})]):o("span",[o("i",{staticClass:"el-icon-star-on",staticStyle:{color:"#c2d6d6","font-size":"25px"},on:{click:function(e){return t.changePriority(t.item.author,t.item.id)}}})]),t._v(" "),1===t.item.priority?o("span",{staticClass:"d"},[t._v(t._s(t.item.todo))]):o("span",[t._v(t._s(t.item.todo))]),t._v(" "),1===t.item.priority?o("span",{staticClass:"d"},[t._v(t._s(t.item.create_date))]):o("span",[t._v(t._s(t.item.create_date))])]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"btn btn-danger",attrs:{id:"e"},on:{click:t.delItem}},[t._v("清除")])])])},staticRenderFns:[]};var v=o("VU/8")(h,m,!1,function(t){o("GelW")},null,null).exports,f={props:{todos:Array,delTodo:Function},components:{TodoItem:v}},p={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"todo-main"},t._l(t.todos,function(e,s){return o("todo-item",{key:s,attrs:{item:e,index:e.id,delTodo:t.delTodo}})}),1)},staticRenderFns:[]};var _=o("VU/8")(f,p,!1,function(t){o("XaEo")},null,null).exports,g={props:{todos:Array,deleteCompleteTodos:Function,selectAllTodos:Function},computed:{completeSize:function(){return this.todos.reduce(function(t,e){return t+(e.status?1:0)},0)},isAllCheck:{get:function(){return this.completeSize==this.todos.length&&this.completeSize>0},set:function(t){this.selectAllTodos(t)}}},methods:{aaa:function(){window.confirm("确认删除"+item.todo+"吗？")&&deleteCompleteTodos}}},b={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"todo-footer"},[o("label",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.isAllCheck,expression:"isAllCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isAllCheck)?t._i(t.isAllCheck,null)>-1:t.isAllCheck},on:{change:function(e){var o=t.isAllCheck,s=e.target,a=!!s.checked;if(Array.isArray(o)){var r=t._i(o,null);s.checked?r<0&&(t.isAllCheck=o.concat([null])):r>-1&&(t.isAllCheck=o.slice(0,r).concat(o.slice(r+1)))}else t.isAllCheck=a}}})]),t._v(" "),o("span",[o("span",[t._v("已完成"+t._s(t.completeSize))]),t._v(" / 全部"+t._s(t.todos.length)+"\n    ")]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.completeSize,expression:"completeSize"}],staticClass:"btn btn-danger",on:{click:t.deleteCompleteTodos}},[t._v("清除已完成任务")])])},staticRenderFns:[]};var k=o("VU/8")(g,b,!1,function(t){o("vK3z")},null,null).exports,y={props:{item:Object,index:Number,delTodo:Function},data:function(){return{token:Object(l.b)("lingxi-token"),username:Object(l.b)("username"),backColor:"white",isShow:!1}},methods:{aaa:function(t){t?(this.backColor="gray",this.isShow=!0):(this.backColor="white",this.isShow=!1)},delItem:function(){var t=this.item,e=this.index,o=this.delTodo;window.confirm("确认删除"+t.todo+"吗？")&&o(e)}}},w={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("li",{staticClass:"a",style:{background:t.backColor},on:{mouseenter:function(e){return t.aaa(!0)},mouseleave:function(e){return t.aaa(!1)}}},[o("label",{staticClass:"b"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.item.status,expression:"item.status"}],staticClass:"c",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.item.status)?t._i(t.item.status,null)>-1:t.item.status},on:{change:function(e){var o=t.item.status,s=e.target,a=!!s.checked;if(Array.isArray(o)){var r=t._i(o,null);s.checked?r<0&&t.$set(t.item,"status",o.concat([null])):r>-1&&t.$set(t.item,"status",o.slice(0,r).concat(o.slice(r+1)))}else t.$set(t.item,"status",a)}}}),t._v(" "),1===t.item.priority?o("span",{staticClass:"d"},[t._v(t._s(t.item.todo))]):o("span",[t._v(t._s(t.item.todo))]),t._v(" "),1===t.item.priority?o("span",{staticClass:"d"},[t._v(t._s(t.item.create_date))]):o("span",[t._v(t._s(t.item.create_date))])]),t._v(" "),o("button",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"btn btn-danger",attrs:{id:"e"},on:{click:t.delItem}},[t._v("删除")])])])},staticRenderFns:[]};var $=o("VU/8")(y,w,!1,function(t){o("MOHq")},null,null).exports,C={props:{todos:Array,delTodo:Function},components:{TodoItemHistory:$}},O={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ul",{staticClass:"todo-main"},t._l(t.todos,function(e,s){return o("todo-item-history",{key:s,attrs:{item:e,index:e.id,delTodo:t.delTodo}})}),1)},staticRenderFns:[]};var T={inject:["reload"],components:{TodoHeader:r,TodoList:_,TodoFooter:k,TodoListHistory:o("VU/8")(C,O,!1,function(t){o("BvJH")},null,null).exports},data:function(){return{token:Object(l.b)("lingxi-token"),username:Object(l.b)("username"),todos:[],todos_history:[],otherUser:Object(l.b)("username"),otherUserShow:""}},mounted:function(){var t=this;"shuzhiwei"==this.username?this.otherUserShow="侯婷玉":this.otherUserShow="舒志伟";var e=this.token,o=this.$store.state.base_url+"/entertainment/todoListShow",s={token:this.token,username:this.username};i.a.post(o,d.a.stringify(s)).then(function(o){var s=o.data;console.log(s);var a=s.code;if(402===a){var r=Object(l.b)("username");return Object(u.a)(r,e),void t.reload()}if(401!==a)for(var n=s.todos,i=0;i<n.length;i++){var c=n[i].id,d=n[i].todo,h=n[i].status,m=n[i].create_date,v={id:c,todo:d,status:h,create_date:m=t.formatDate(new Date(parseInt(m))),author:n[i].username,priority:n[i].priority};t.todos.push(v)}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})},methods:{sleep:function(t){for(var e=(new Date).getTime()+t;;)if((new Date).getTime()>e)return},formatDate:function(t){return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "},addTodo:function(t){var e=this,o=(new Date).valueOf(),s=this.$store.state.base_url+"/entertainment/todoInsert",a={token:this.token,create_date:o,todo:t,username:this.otherUser};i.a.post(s,d.a.stringify(a)).then(function(t){var o=t.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void e.reload()}if(401!==s){var r=e.$store.state.base_url+"/entertainment/todoListShow",n={token:e.token,username:e.otherUser};i.a.post(r,d.a.stringify(n)).then(function(t){var o=t.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void e.reload()}if(401!==s){var r=o.todos;e.todos=[];for(var n=0;n<r.length;n++){var i=r[n].id,c=r[n].todo,d=r[n].status,h=r[n].create_date,m={id:i,todo:c,status:d,create_date:h=e.formatDate(new Date(parseInt(h)))};e.todos.push(m)}}else e.$message.error("无acs权限！")}).catch(function(t){console.log(t),e.$message.error(t)})}else e.$message.error("无acs权限！")}).catch(function(t){console.log(t),e.$message.error(t)})},delTodo:function(t){var e=this;if(this.username===this.otherUser){var o=this.$store.state.base_url+"/entertainment/todoDelete",s={token:this.token,ids:t};i.a.post(o,d.a.stringify(s)).then(function(t){var o=t.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void e.reload()}if(401!==s){var r=e.$store.state.base_url+"/entertainment/todoListShow",n={token:e.token,username:e.otherUser};i.a.post(r,d.a.stringify(n)).then(function(t){var o=t.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void e.reload()}if(401!==s){var r=o.todos;e.todos=[];for(var n=0;n<r.length;n++){var i=r[n].id,c=r[n].todo,d=r[n].status,h=r[n].create_date,m={id:i,todo:c,status:d,create_date:h=e.formatDate(new Date(parseInt(h)))};e.todos.push(m)}}else e.$message.error("无acs权限！")}).catch(function(t){console.log(t)})}else e.$message.error("无acs权限！")}).catch(function(t){console.log(t),e.$message.error(t)})}else this.$message.error("不是您的todo哦！")},deleteCompleteTodos:function(){var t=this;if(this.username===this.otherUser){for(var e=this.todos.filter(function(t){return 1==t.status||1==t.status}),o="",s=0;s<e.length;s++)o+=e[s].id+",";o=o.substr(0,o.length-1),console.log("ids: "+o);var a=this.$store.state.base_url+"/entertainment/todoDelete",r={token:this.token,ids:o};i.a.post(a,d.a.stringify(r)).then(function(e){var o=e.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void t.reload()}if(401!==s){var r=t.$store.state.base_url+"/entertainment/todoListShow",n={token:t.token,username:t.otherUser};i.a.post(r,d.a.stringify(n)).then(function(e){var o=e.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void t.reload()}if(401!==s){var r=o.todos;t.todos=[];for(var n=0;n<r.length;n++){var i=r[n].id,c=r[n].todo,d=r[n].status,h=r[n].create_date,m={id:i,todo:c,status:d,create_date:h=t.formatDate(new Date(parseInt(h)))};t.todos.push(m)}}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})}else this.$message.error("不是您的todo哦！")},selectAllTodos:function(t){this.todos.forEach(function(e){return e.status=t})},deleteReadHistory:function(t){var e=this;if(this.username===this.otherUser){var o=this.$store.state.base_url+"/entertainment/todoRealDeleteHistory",s={token:this.token,ids:t};i.a.post(o,d.a.stringify(s)).then(function(t){var o=t.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void e.reload()}if(401!==s){var r=e.$store.state.base_url+"/entertainment/todoShowHistory",n={token:e.token,username:e.username};i.a.post(r,d.a.stringify(n)).then(function(t){var o=t.data;console.log(o);var s=o.code;if(402===s){var a=Object(l.b)("username");return Object(u.a)(a,token),void e.reload()}if(401!==s){var r=o.todos;e.todos_history=[];for(var n=0;n<r.length;n++){var i=r[n].id,c=r[n].todo,d=r[n].status,h=r[n].create_date,m={id:i,todo:c,status:d,create_date:h=e.formatDate(new Date(parseInt(h)))};e.todos_history.push(m)}}else e.$message.error("无acs权限！")}).catch(function(t){console.log(t)})}else e.$message.error("无acs权限！")}).catch(function(t){console.log(t),e.$message.error(t)})}else this.$message.error("不是您的todo哦！")},showHistory:function(){var t=this;this.todos=[],this.showMyselfTodo(),this.otherUser=this.username;var e=this.token,o=this.$store.state.base_url+"/entertainment/todoShowHistory",s={token:this.token,username:this.username};this.todos_history=[],i.a.post(o,d.a.stringify(s)).then(function(o){var s=o.data;console.log(s);var a=s.code;if(402===a){var r=Object(l.b)("username");return Object(u.a)(r,e),void t.reload()}if(401!==a)for(var n=s.todos,i=0;i<n.length;i++){var c=n[i].id,d=n[i].todo,h=n[i].status,m=n[i].create_date,v={id:c,todo:d,status:h,create_date:m=t.formatDate(new Date(parseInt(m)))};t.todos_history.push(v)}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})},showOther:function(){var t=this,e=this.token,o=this.$store.state.base_url+"/entertainment/todoListShow";"shuzhiwei"==this.username?this.otherUser="houtingyu":this.otherUser="shuzhiwei";var s={token:this.token,username:this.otherUser};i.a.post(o,d.a.stringify(s)).then(function(o){var s=o.data;console.log(s);var a=s.code;if(402===a){var r=Object(l.b)("username");return Object(u.a)(r,e),void t.reload()}if(401!==a){var n=s.todos;t.todos=[],t.todos_history=[];for(var i=0;i<n.length;i++){var c=n[i].id,d=n[i].todo,h=n[i].status,m=n[i].create_date,v={id:c,todo:d,status:h,create_date:m=t.formatDate(new Date(parseInt(m)))};t.todos.push(v)}t.showOtherHistory()}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})},showOtherHistory:function(){var t=this,e=this.token,o=this.$store.state.base_url+"/entertainment/todoShowHistory",s={token:this.token,username:this.otherUser};this.todos_history=[],i.a.post(o,d.a.stringify(s)).then(function(o){var s=o.data;console.log(s);var a=s.code;if(402===a){var r=Object(l.b)("username");return Object(u.a)(r,e),void t.reload()}if(401!==a)for(var n=s.todos,i=0;i<n.length;i++){var c=n[i].id,d=n[i].todo,h=n[i].status,m=n[i].create_date,v={id:c,todo:d,status:h,create_date:m=t.formatDate(new Date(parseInt(m)))};t.todos_history.push(v)}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})},showMyself:function(){this.todos_history=[],this.todos=[],this.showMyselfTodo(),this.otherUser=this.username},showMyselfTodo:function(){var t=this,e=this.token,o=this.$store.state.base_url+"/entertainment/todoListShow",s={token:this.token,username:this.username};i.a.post(o,d.a.stringify(s)).then(function(o){var s=o.data;console.log(s);var a=s.code;if(402===a){var r=Object(l.b)("username");return Object(u.a)(r,e),void t.reload()}if(401!==a)for(var n=s.todos,i=0;i<n.length;i++){var c=n[i].id,d=n[i].todo,h=n[i].status,m=n[i].create_date,v={id:c,todo:d,status:h,create_date:m=t.formatDate(new Date(parseInt(m))),author:n[i].username,priority:n[i].priority};t.todos.push(v)}else t.$message.error("无acs权限！")}).catch(function(t){console.log(t)})}}},j={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("div",{staticClass:"todo-container"},[o("div",{staticClass:"todo-wrap"},[o("todo-header",{on:{addTodo:t.addTodo}}),t._v(" "),o("todo-list",{attrs:{todos:t.todos,delTodo:t.delTodo}}),t._v(" "),o("todo-footer",{attrs:{todos:t.todos,deleteCompleteTodos:t.deleteCompleteTodos,selectAllTodos:t.selectAllTodos}})],1),t._v(" "),o("div",{staticStyle:{"text-align":"center"}},[o("el-button",{attrs:{type:"success",size:"small"},on:{click:t.showMyself}},[t._v("自己")]),t._v(" "),o("el-button",{attrs:{type:"success",size:"small"},on:{click:t.showHistory}},[t._v("历史")]),t._v(" "),o("el-button",{attrs:{type:"success",size:"small"},on:{click:t.showOther}},[t._v(t._s(t.otherUserShow))])],1)]),t._v(" "),o("div",{staticClass:"todo-container"},[o("todo-list-history",{attrs:{todos:t.todos_history,delTodo:t.deleteReadHistory}})],1)])},staticRenderFns:[]};var S=o("VU/8")(T,j,!1,function(t){o("CHIb")},null,null);e.default=S.exports},MOHq:function(t,e){},XaEo:function(t,e){},h3Qj:function(t,e){},vK3z:function(t,e){}});