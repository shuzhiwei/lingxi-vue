webpackJsonp([10],{hnFl:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("Xxa5"),a=n.n(r),s=n("exGp"),o=n.n(s),i=n("g5nd"),c=n("miE6"),u=n("BoEg"),l={inject:["reload"],data:function(){return{count:0,items:[{text:"日常任务"},{text:"完成清单"}],balls:[{show:!1},{show:!1},{show:!1}],dropBalls:[],addInput:"",addDatas:[],subInput:"",subDatas:[],subFlag:!1,centerDialogVisible:!1,reverse:!0,activities:[],backColor:"white",isShow:!1}},mounted:function(){this.showHistoryOnlyToday(),this.showPiggyBankCountScore()},methods:{addFiveInput:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.addInput,r=Object(i.b)("username"),s=(new Date).toLocaleDateString(),o=new Date(s)/1e3*1e3,c=5,t.next=7,e.piggyBankInsert(n,o,r,c);case 7:return e.addInput="",t.next=10,e.showPiggyBankCountScore();case 10:case"end":return t.stop()}},t,e)}))()},addTenInput:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.addInput,r=Object(i.b)("username"),s=(new Date).toLocaleDateString(),o=new Date(s)/1e3*1e3,c=10,t.next=7,e.piggyBankInsert(n,o,r,c);case 7:return e.addInput="",t.next=10,e.showPiggyBankCountScore();case 10:case"end":return t.stop()}},t,e)}))()},addFiveInputFunc:function(e){""!==this.addInput?(this.drop(e.target),this.addFiveInput()):this.$message.error("输入框不能为空哦！")},addTenInputFunc:function(e){""!==this.addInput?(this.drop(e.target),this.addTenInput()):this.$message.error("输入框不能为空哦！")},centerDialogVisibleShowControl:function(){this.centerDialogVisible=!1,this.isShow=!1,this.showPiggyBankCountScore()},isShowFunc:function(){this.isShow?(this.isShow=!1,this.showPiggyBankCountScore()):this.isShow=!0},showSub:function(){var e=this;this.subFlag?this.subFlag=!1:this.$confirm("确认要打开减分界面吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(function(){e.subFlag=!0}).catch(function(){e.$message({type:"info",message:"已取消"})})},showHistory:function(e){var t=this;return o()(a.a.mark(function n(){var r,s,o,l,d,p,b,g,h;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(i.b)("lingxi-token"),s=t.$store.state.base_url+"/entertainment/todoHisoryOnPiggyBank",o={token:r,timestamp:e},n.next=5,u.a.post(s,o);case 5:if(l=n.sent,console.log(l),402!==l.code){n.next=13;break}return Object(c.a)(Object(i.b)("username"),r),n.next=12,t.showHistory(e);case 12:return n.abrupt("return");case 13:for(t.addDatas=[],d=l.todos,p=0;p<d.length;p++)b=d[p].id,g=d[p].todo,h={id:b,todo:g,username:d[p].username},t.addDatas.push(h);case 16:case"end":return n.stop()}},n,t)}))()},showPiggyBankCountScore:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(i.b)("lingxi-token"),r=e.$store.state.base_url+"/entertainment/piggyBankCountScore",s={token:n},t.next=5,u.a.post(r,s);case 5:if(o=t.sent,console.log(o),402!==o.code){t.next=13;break}return Object(c.a)(Object(i.b)("username"),n),t.next=12,e.showPiggyBankCountScore();case 12:return t.abrupt("return");case 13:e.count=o.data[0],console.log("count： "+e.count),"None"==e.count&&(e.count=0);case 16:case"end":return t.stop()}},t,e)}))()},showHistoryOnlyToday:function(){var e=(new Date).toLocaleDateString(),t=new Date(e)/1e3*1e3;console.log("hello: "+t),this.showHistory(t)},subFiveInputFunc:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.subInput){t.next=3;break}return e.$message.error("输入框不能为空哦！"),t.abrupt("return");case 3:return n=e.subInput,r=(new Date).toLocaleDateString(),s=new Date(r)/1e3*1e3,o=Object(i.b)("username"),c=-5,t.next=10,e.piggyBankInsert(n,s,o,c);case 10:return e.subInput="",t.next=13,e.showPiggyBankCountScore();case 13:case"end":return t.stop()}},t,e)}))()},subTenInputFunc:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,c;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(""!==e.subInput){t.next=3;break}return e.$message.error("输入框不能为空哦！"),t.abrupt("return");case 3:return n=e.subInput,r=(new Date).toLocaleDateString(),s=new Date(r)/1e3*1e3,o=Object(i.b)("username"),c=-10,t.next=10,e.piggyBankInsert(n,s,o,c);case 10:return e.subInput="",t.next=13,e.showPiggyBankCountScore();case 13:case"end":return t.stop()}},t,e)}))()},additem:function(e,t,n){var r=this;return o()(a.a.mark(function s(){var o,i,c,u,l;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=t.id,i=t.todo,c=t.username,u=(new Date).toLocaleDateString(),l=new Date(u)/1e3*1e3,console.log("hello: "+l),r.drop(n.target),r.count+=5,console.log("id: "+o),console.log("key: "+e),a.next=12,r.updateTodoPiggyBankFlag(o,l);case 12:return a.next=14,r.showHistoryOnlyToday();case 14:return a.next=16,r.piggyBankInsert(i,l,c,5);case 16:return a.next=18,r.showPiggyBankCountScore();case 18:case"end":return a.stop()}},s,r)}))()},updateTodoPiggyBankFlag:function(e,t){var n=this;return o()(a.a.mark(function r(){var s,o,l,d;return a.a.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return s=Object(i.b)("lingxi-token"),o=n.$store.state.base_url+"/entertainment/todoUpdatePiggyBank",l={token:s,id:e,piggy_bank_flag:1,operate_date:t},r.next=5,u.a.post(o,l);case 5:if(d=r.sent,console.log(d),402!==d.code){r.next=12;break}return Object(c.a)(Object(i.b)("username"),s),r.next=12,n.updateTodoPiggyBankFlag(e,t);case 12:case"end":return r.stop()}},r,n)}))()},piggyBankInsert:function(e,t,n,r){var s=this;return o()(a.a.mark(function o(){var l,d,p,b;return a.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return l=Object(i.b)("lingxi-token"),d=s.$store.state.base_url+"/entertainment/piggyBankInsert",p={token:l,todo:e,create_date:t,operate_time:t,username:n,score:r},a.next=5,u.a.post(d,p);case 5:if(b=a.sent,console.log(b),402!==b.code){a.next=12;break}return Object(c.a)(Object(i.b)("username"),l),a.next=12,s.piggyBankInsert(e,t,n,r);case 12:case"end":return a.stop()}},o,s)}))()},formatDate:function(e){return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "},piggyBankShow:function(){var e=this;return o()(a.a.mark(function t(){var n,r,s,o,l,d,p,b,g,h,f;return a.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e.activities=[],e.centerDialogVisible=!0,n=Object(i.b)("lingxi-token"),r=e.$store.state.base_url+"/entertainment/piggyBankShow",s={token:n},t.next=7,u.a.post(r,s);case 7:if(o=t.sent,console.log(o),402!==o.code){t.next=15;break}return Object(c.a)(Object(i.b)("username"),n),t.next=14,e.piggyBankShow();case 14:return t.abrupt("return");case 15:for(l=o.data,d=0;d<l.length;d++)p=l[d].id,b=l[d].todo,g=e.formatDate(new Date(parseInt(l[d].create_date))),h=e.formatDate(new Date(parseInt(l[d].operate_time))),f={id:p,todo:b,create_date:g,operate_time:h,username:l[d].username,score:l[d].score},e.activities.push(f);case 17:case"end":return t.stop()}},t,e)}))()},deletePiggyBank:function(e){var t=this;return o()(a.a.mark(function n(){var r,s,o,l;return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=Object(i.b)("lingxi-token"),s=t.$store.state.base_url+"/entertainment/piggyBankDelete",o={token:r,ids:e},n.next=5,u.a.post(s,o);case 5:if(l=n.sent,console.log(l),402!==l.code){n.next=12;break}return Object(c.a)(Object(i.b)("username"),r),n.next=12,t.deletePiggyBank(e);case 12:case"end":return n.stop()}},n,t)}))()},delPiggyBank:function(e){var t=this;this.$confirm("确认完成"+e.todo+"吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(o()(a.a.mark(function n(){return a.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,t.deletePiggyBank(e.id);case 2:return n.next=4,t.piggyBankShow();case 4:case"end":return n.stop()}},n,t)}))).catch(function(){t.$message({type:"info",message:"已取消"})})},subitem:function(){this.count-=5},drop:function(e){for(var t=0;t<this.balls.length;t++){var n=this.balls[t];if(!n.show)return n.show=!0,n.el=e,void this.dropBalls.push(n)}},beforeDrop:function(e){for(var t=this.balls.length;t--;){var n=this.balls[t];if(n.show){var r=n.el.getBoundingClientRect(),a=r.left-700,s=-(window.innerHeight-r.top-120);e.style.display="",e.style.webkitTransform="translateY("+s+"px)",e.style.transform="translateY("+s+"px)";var o=e.getElementsByClassName("inner-hook")[0];o.style.webkitTransform="translateX("+a+"px)",o.style.transform="translateX("+a+"px)"}}},dropping:function(e,t){e.offsetHeight;e.style.webkitTransform="translate3d(0,0,0)",e.style.transform="translate3d(0,0,0)";var n=e.getElementsByClassName("inner-hook")[0];n.style.webkitTransform="translate3d(0,0,0)",n.style.transform="translate3d(0,0,0)",e.addEventListener("transitionend",t)},afterDrop:function(e){var t=this.dropBalls.shift();t&&(t.show=!1,e.style.display="none")}}},d={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"title",on:{click:e.showSub}},[e._v(e._s(e.count))]),e._v(" "),r("ul",{staticClass:"shop"},[e._l(e.addDatas,function(t,n){return r("li",[r("span",{staticClass:"ziti"},[e._v(e._s(t.todo))]),e._v(" "),r("el-button",{on:{click:function(r){return e.additem(n,t,r)}}},[e._v("加5分")])],1)}),e._v(" "),r("li",{directives:[{name:"show",rawName:"v-show",value:0===e.addDatas.length,expression:"addDatas.length === 0"}]},[r("el-input",{model:{value:e.addInput,callback:function(t){e.addInput=t},expression:"addInput"}}),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.addFiveInputFunc}},[e._v("加5分")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"success"},on:{click:e.addTenInputFunc}},[e._v("加10分")]),e._v(" "),r("br"),r("br")],1),e._v(" "),r("li",{directives:[{name:"show",rawName:"v-show",value:e.subFlag,expression:"subFlag"}]},[r("el-input",{model:{value:e.subInput,callback:function(t){e.subInput=t},expression:"subInput"}}),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.subFiveInputFunc}},[e._v("减5分")]),e._v(" "),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:e.subTenInputFunc}},[e._v("减10分")])],1)],2),e._v(" "),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),r("br"),e._v(" "),r("img",{staticClass:"cart",attrs:{src:n("wOoo")},on:{click:e.piggyBankShow}}),e._v(" "),r("el-dialog",{attrs:{title:"提示",visible:e.centerDialogVisible,width:"30%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t},click:e.isShowFunc}},[r("span",[r("el-timeline",{attrs:{reverse:e.reverse}},e._l(e.activities,function(t,n){return r("el-timeline-item",{key:n,attrs:{timestamp:t.operate_time}},[e._v("\n                            "+e._s(t.todo)+"    "+e._s(t.score)+"\n                            "),r("button",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"btn btn-danger",attrs:{id:"e"},on:{click:function(n){return e.delPiggyBank(t)}}},[e._v("删除")])])}),1)],1),e._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.centerDialogVisibleShowControl}},[e._v("取 消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.centerDialogVisibleShowControl}},[e._v("确 定")]),e._v(" "),r("i",{staticClass:"el-icon-edit",on:{click:e.isShowFunc}})],1)]),e._v(" "),e._l(e.balls,function(t){return r("div",[r("transition",{attrs:{name:"drop"},on:{"before-enter":e.beforeDrop,enter:e.dropping,"after-enter":e.afterDrop}},[r("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"ball.show"}],staticClass:"ball"},[r("div",{staticClass:"inner inner-hook"})])])],1)})],2)},staticRenderFns:[]};var p=n("VU/8")(l,d,!1,function(e){n("krYy")},null,null);t.default=p.exports},krYy:function(e,t){},wOoo:function(e,t,n){e.exports=n.p+"static/img/存钱罐.78de77b.png"}});